<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>InstaSquare</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="manifest" href="site.webmanifest">
  <link rel="apple-touch-icon" href="icon.png">
  <link rel="stylesheet" href="css/main.css">
  <script src="jquery.min.js"></script>
</head>

<body>
  <script src="jimp.js"></script>
  <input type="file" id="file" name="files[]" onchange="startRead()" multiple />
  <script>
    Jimp.read("C:/Users/Star/Google Drive/UMich/Classes/1 Coding/4 Websites/1 Projects/3 InstaSquare/lol.png").then(function (
      lenna) {
      lenna.resize(256, 256) // resize
        .quality(60) // set JPEG quality
        .greyscale() // set greyscale
        .getBase64(Jimp.MIME_JPEG, function (err, src) {
          var img = document.createElement("img");
          img.setAttribute("src", src);
          document.body.appendChild(img);
        });
    }).catch(function (err) {
      console.error(err);
    });

    function startRead(evt) {
      var file = document.getElementById("file").files[0];
      if (file) {
        // getAsText(file);
        getAsImage(file);


        // alert("Name: " + file.name + "/n" + "Last Modified Date :" + file.lastModifiedDate);
        // Jimp.read("lol.png", function (err, lenna) {
        //   if (err) throw err;
        //   lenna.resize(256, 256) // resize
        //     .quality(60) // set JPEG quality
        //     .greyscale() // set greyscale
        //     .write("lena-small-bw.jpg"); // save
        // });
      }
    }
  </script>
  <div id="op"></div>
  <style>
    #op {
      width: 500px;
      height: 500px;
      overflow: auto;
      background-color: rgba(221, 214, 221, 0.3);
      border: 1px dashed black;
    }
  </style>
  <script>
    function getAsText(readFile) {
      var reader = new FileReader();
      reader.readAsText(readFile, "UTF-8");
      reader.onload = loaded;
    }

    function loaded(evt) {
      // alert("File Loaded Successfully");
      var fileString = evt.target.result;
      $("#op").text(fileString);
    }


    function getAsImage(readFile) {
      var reader = new FileReader();
      reader.readAsDataURL(readFile);
      console.log(readFile.name);
      console.log(reader.result);
      reader.onload = addImg;
    }

    function addImg(imgsrc) {
      var img = document.createElement("img");
      img.setAttribute("src", imgsrc.target.result);
      document.getElementById("op").insertBefore(img, document.getElementById("op").childNodes[0]);
    }
  </script>
</body>

</html>